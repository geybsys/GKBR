import { notify } from '../components/NotificationPanel.jsx';

const simulateNetworkDelay = (ms = 300) => new Promise(resolve => setTimeout(resolve, ms));

// Имитация данных модулей с подробным контентом
// Этот объект теперь будет пустым или содержать только общие метаданные,
// так как контент будет в отдельных файлах модулей.
const mockModulesContent = {
  // Контент для модулей 1, 2, 3, 4, 5 и далее будет загружаться из отдельных JSX файлов.
  // Здесь остаются только общие метаданные, если они нужны для ModuleLauncher,
  // но для простоты пока оставим пустым.
};

// Имитация вопросов квизов (банк из 10 вопросов для каждого модуля)
const mockQuizQuestions = {
  1: [ // Вопросы для модуля 1 (СРО) - 10 вопросов
    {
      id: 1,
      question: "Что означает аббревиатура СРО?",
      options: [
        "Система Регулирования Отраслей",
        "Саморегулируемая Организация",
        "Союз Российских Объединений",
        "Социально-Региональное Объединение"
      ],
      correct: 1,
      explanation: "СРО расшифровывается как Саморегулируемая Организация."
    },
    {
      id: 2,
      question: "Какова основная цель создания СРО?",
      options: [
        "Получение прибыли для учредителей",
        "Обеспечение добросовестной конкуренции и качества работ",
        "Контроль за государственными закупками",
        "Выдача лицензий на строительство"
      ],
      correct: 1,
      explanation: "Основная цель СРО — обеспечение добросовестной конкуренции и качественного выполнения работ ее членами."
    },
    {
      id: 3,
      question: "При какой стоимости контракта требуется членство в СРО?",
      options: [
        "Любой контракт",
        "Более 1 млн рублей",
        "Более 10 млн рублей",
        "Только государственные контракты"
      ],
      correct: 2,
      explanation: "Без членства в СРО компании нельзя браться за серьезные объекты стоимостью более 10 млн рублей."
    },
    {
      id: 4,
      question: "Какой из перечисленных видов СРО контролирует НОСТРОЙ?",
      options: [
        "Проектировочные СРО",
        "Изыскательские СРО",
        "Строительные СРО",
        "Энергоаудиторские СРО"
      ],
      correct: 2,
      explanation: "НОСТРОЙ контролирует строительные СРО."
    },
    {
      id: 5,
      question: "Какой федеральный закон регулирует деятельность СРО?",
      options: [
        "ФЗ № 44-ФЗ",
        "ФЗ № 223-ФЗ",
        "ФЗ № 315-ФЗ",
        "ФЗ № 123-ФЗ"
      ],
      correct: 2,
      explanation: "Деятельность СРО регулируется Федеральным законом от 01.12.2007 №315-ФЗ \"О саморегулируемых организациях\"."
    },
    {
      id: 6,
      question: "Что означает КФ ВВ в контексте СРО?",
      options: [
        "Компенсационный фонд возмещения вреда",
        "Коэффициент финансовой устойчивости",
        "Кассовый фонд внутренних выплат",
        "Кредитный фонд временных вложений"
      ],
      correct: 0,
      explanation: "КФ ВВ — это Компенсационный фонд возмещения вреда, обязательный для всех членов СРО."
    },
    {
      id: 7,
      question: "Сколько специалистов в НРС требуется для 1-3 уровней ответственности в строительных СРО?",
      options: [
        "1 специалист",
        "2 специалиста",
        "3 специалиста",
        "4 специалиста"
      ],
      correct: 1,
      explanation: "Для 1-3 уровней ответственности в строительных СРО требуется минимум 2 специалиста в НРС."
    },
    {
      id: 8,
      question: "Какой шаг является первым в процессе работы с клиентом для успешной продажи СРО?",
      options: [
        "Подготовка предложения",
        "Закрытие сделки",
        "Выявление потребности",
        "Расчет стоимости"
      ],
      correct: 2,
      explanation: "Первый шаг — выявление потребности клиента."
    },
    {
      id: 9,
      question: "Какова максимальная сумма штрафа для компании за работу без СРО по КоАП РФ, статья 9.5.1?",
      options: [
        "50 000 рублей",
        "100 000 рублей",
        "500 000 рублей",
        "1 000 000 рублей"
      ],
      correct: 3,
      explanation: "Максимальный штраф за работу без СРО составляет до 1 000 000 рублей."
    },
    {
      id: 10,
      question: "Что произойдет, если у компании отсутствуют специалисты в НРС?",
      options: [
        "Будет выписан небольшой штраф",
        "Приостановка деятельности на 10 дней",
        "Исключение из СРО и потеря всех взносов",
        "Требования к специалистам будут снижены"
      ],
      correct: 2,
      explanation: "Отсутствие специалистов в НРС может привести к исключению из СРО и потере всех взносов."
    }
  ],
  2: [ // Вопросы для модуля 2 (НРС)
    {
      id: 1,
      question: "Что означает аббревиатура НРС?",
      options: [
        "Национальная Регулирующая Система",
        "Национальный Реестр Специалистов",
        "Нормативно-Разрешительная Служба",
        "Научно-Исследовательская Система"
      ],
      correct: 1,
      explanation: "НРС расшифровывается как Национальный Реестр Специалистов."
    },
    {
      id: 2,
      question: "Сколько специалистов из НРС должно быть в штате компании для членства в СРО?",
      options: [
        "Минимум один",
        "Минимум два",
        "Минимум три",
        "Количество не регламентируется"
      ],
      correct: 1,
      explanation: "Для членства в СРО компания должна иметь минимум двух специалистов, включенных в НРС, по основному месту работы."
    },
    {
      id: 3,
      question: "Какой документ подтверждает включение специалиста в НРС?",
      options: [
        "Диплом о высшем образовании",
        "Трудовая книжка",
        "Уведомление о включении в реестр",
        "Сертификат соответствия"
      ],
      correct: 2,
      explanation: "Включение в НРС подтверждается уведомлением от Национального объединения строителей или проектировщиков."
    },
    {
      id: 4,
      question: "Как часто необходимо проходить повышение квалификации для специалистов НРС?",
      options: [
        "Ежегодно",
        "Раз в 3 года",
        "Раз в 5 лет",
        "Не требуется"
      ],
      correct: 2,
      explanation: "Повышение квалификации для специалистов НРС требуется не реже одного раза в 5 лет."
    },
    {
      id: 5,
      question: "Какое образование необходимо для включения в НРС?",
      options: [
        "Среднее специальное",
        "Высшее образование по профилю",
        "Любое высшее образование",
        "Не имеет значения"
      ],
      correct: 1,
      explanation: "Для включения в НРС необходимо высшее образование по специальности, соответствующей профилю работы."
    },
    {
      id: 6,
      question: "Что произойдет, если компания не имеет специалистов в НРС?",
      options: [
        "Она не сможет получить лицензию",
        "Она не сможет быть членом СРО",
        "Ей будут начислены штрафы",
        "Ее деятельность будет приостановлена"
      ],
      correct: 1,
      explanation: "Без специалистов в НРС компания физически не сможет быть членом СРО."
    },
    {
      id: 7,
      question: "Какой стаж работы в строительной отрасли требуется для включения в НРС?",
      options: [
        "Не менее 1 года",
        "Не менее 3 лет",
        "Не менее 5 лет",
        "Не имеет значения"
      ],
      correct: 1,
      explanation: "Требуется стаж работы не менее 3 лет на инженерных должностях."
    },
    {
      id: 8,
      question: "Какой орган ведет Национальный реестр специалистов?",
      options: [
        "Министерство строительства",
        "Ростехнадзор",
        "НОСТРОЙ/НОПРИЗ",
        "Федеральная налоговая служба"
      ],
      correct: 2,
      explanation: "Национальные объединения (НОСТРОЙ и НОПРИЗ) ведут реестры специалистов."
    },
    {
      id: 9,
      question: "Является ли НРС обязательным требованием для всех строительных компаний?",
      options: [
        "Да, для всех без исключения",
        "Нет, только для ИП",
        "Да, для компаний, являющихся членами СРО",
        "Нет, это добровольно"
      ],
      correct: 2,
      explanation: "НРС является обязательным требованием для компаний, которые хотят быть членами СРО."
    },
    {
      id: 10,
      question: "Что из перечисленного не является требованием для включения в НРС?",
      options: [
        "Высшее образование",
        "Наличие судимости",
        "Повышение квалификации",
        "Стаж работы"
      ],
      correct: 1,
      explanation: "Отсутствие неснятой или непогашенной судимости является требованием, а не ее наличие."
    }
  ],
  3: [ // Вопросы для модуля 3 (НОК)
    {
      id: 1,
      question: "Что означает аббревиатура НОК?",
      options: [
        "Национальный Орган Контроля",
        "Независимая Оценка Квалификации",
        "Нормативно-Оценочный Комитет",
        "Национальный Образовательный Кодекс"
      ],
      correct: 1,
      explanation: "НОК расшифровывается как Независимая Оценка Квалификации."
    },
    {
      id: 2,
      question: "С какого года удостоверения о повышении квалификации заменены на НОК?",
      options: [
        "С 1 января 2021 года",
        "С 1 сентября 2022 года",
        "С 1 января 2023 года",
        "С 1 марта 2024 года"
      ],
      correct: 1,
      explanation: "С 1 сентября 2022 года обычные удостоверения о повышении квалификации больше не действуют, теперь требуется НОК."
    },
    {
      id: 3,
      question: "Сколько этапов включает процедура НОК?",
      options: [
        "Один",
        "Два",
        "Три",
        "Четыре"
      ],
      correct: 1,
      explanation: "Процедура НОК включает два этапа: теоретический и практический."
    },
    {
      id: 4,
      question: "Куда подаются документы для прохождения НОК?",
      options: [
        "В Министерство строительства",
        "В Центр оценки квалификаций (ЦОК)",
        "В СРО",
        "В Росстандарт"
      ],
      correct: 1,
      explanation: "Документы для прохождения НОК подаются в Центр оценки квалификаций (ЦОК)."
    },
    {
      id: 5,
      question: "Каков срок действия свидетельства о квалификации, полученного по результатам НОК?",
      options: [
        "1 год",
        "3 года",
        "5 лет",
        "Бессрочно"
      ],
      correct: 2,
      explanation: "Срок действия свидетельства о квалификации, полученного по результатам НОК, составляет 5 лет."
    },
    {
      id: 6,
      question: "Что произойдет, если специалиста исключат из НРС из-за отсутствия НОК?",
      options: [
        "Компания получит штраф",
        "Компания потеряет членство в СРО",
        "Специалист будет временно отстранен от работы",
        "Требования к компании будут пересмотрены"
      ],
      correct: 1,
      explanation: "Без НОК специалиста исключат из НРС, что может привести к потере членства компании в СРО."
    },
    {
      id: 7,
      question: "Какой этап НОК включает компьютерное тестирование?",
      options: [
        "Практический этап",
        "Теоретический этап",
        "Этап собеседования",
        "Этап подготовки документов"
      ],
      correct: 1,
      explanation: "Компьютерное тестирование проводится на теоретическом этапе."
    },
    {
      id: 8,
      question: "Что из перечисленного является ключевым для успешной сдачи НОК?",
      options: [
        "Только опыт работы",
        "Только высшее образование",
        "Комплексная подготовка и изучение стандартов",
        "Знакомство с членами комиссии"
      ],
      correct: 2,
      explanation: "Комплексная подготовка, изучение профессиональных стандартов и решение типовых заданий являются ключевыми для успешной сдачи НОК."
    },
    {
      id: 9,
      question: "Какой документ выдается по результатам успешного прохождения НОК?",
      options: [
        "Удостоверение о повышении квалификации",
        "Сертификат соответствия",
        "Свидетельство о квалификации",
        "Лицензия на деятельность"
      ],
      correct: 2,
      explanation: "По результатам успешного прохождения НОК выдается свидетельство о квалификации."
    },
    {
      id: 10,
      question: "Для чего используется специализированная обучающая платформа, такая как GKBR Platform, при подготовке к НОК?",
      options: [
        "Для получения диплома",
        "Для решения типовых тестовых заданий и кейсов",
        "Для поиска работы",
        "Для общения с другими специалистами"
      ],
      correct: 1,
      explanation: "Специализированные платформы помогают в решении типовых тестовых заданий и практических кейсов."
    }
  ],
  4: [ // Вопросы для модуля 4 (Удостоверения рабочих специальностей) - 10 вопросов
    {
      id: 1,
      question: "Что подтверждает удостоверение рабочей специальности?",
      options: [
        "Наличие высшего образования",
        "Право на получение заработной платы",
        "Необходимые знания и навыки для выполнения определенных работ",
        "Членство в профессиональном союзе"
      ],
      correct: 2,
      explanation: "Удостоверение рабочей специальности подтверждает, что рабочий обладает необходимыми знаниями и навыками для выполнения определенных работ."
    },
    {
      id: 2,
      question: "Какой из перечисленных органов контролирует наличие удостоверений у работников при проверках?",
      options: [
        "Минфин России",
        "Центральный банк РФ",
        "Государственная инспекция труда (ГИТ)",
        "Федеральная налоговая служба"
      ],
      correct: 2,
      explanation: "ГИТ (Государственная инспекция труда) проверяет наличие удостоверений у работников при проверках."
    },
    {
      id: 3,
      question: "Каков срок действия удостоверения о допуске к работам с повышенной опасностью?",
      options: [
        "Бессрочно",
        "1 год",
        "3 года",
        "5 лет"
      ],
      correct: 1,
      explanation: "Удостоверение о допуске к работам с повышенной опасностью требует ежегодной переаттестации, то есть действует 1 год."
    },
    {
      id: 4,
      question: "Какая из этих специальностей относится к категории 'Грузоподъемные работы'?",
      options: [
        "Монтажник",
        "Электромонтажник",
        "Стропальщик",
        "Отделочник"
      ],
      correct: 2,
      explanation: "Стропальщик относится к категории 'Грузоподъемные работы'."
    },
    {
      id: 5,
      question: "Какой документ не требуется от клиента для оформления удостоверений?",
      options: [
        "Паспортные данные сотрудников",
        "СНИЛС",
        "Свидетельство о рождении",
        "Фотографии 3х4 см"
      ],
      correct: 2,
      explanation: "Свидетельство о рождении не требуется для оформления удостоверений рабочей специальности."
    },
    {
      id: 6,
      question: "Каков минимальный штраф для юридических лиц за первичное нарушение отсутствия удостоверений у работников?",
      options: [
        "10 000 рублей",
        "30 000 рублей",
        "50 000 рублей",
        "100 000 рублей"
      ],
      correct: 1,
      explanation: "Минимальный штраф для юридических лиц за первичное нарушение составляет 30 000 рублей."
    },
    {
      id: 7,
      question: "Какое из перечисленных последствий не связано с отсутствием удостоверений у работников?",
      options: [
        "Приостановление деятельности",
        "Отстранение должностных лиц от работы",
        "Увеличение прибыли компании",
        "Запрет на участие в тендерах"
      ],
      correct: 2,
      explanation: "Увеличение прибыли компании не является последствием отсутствия удостоверений; наоборот, это может привести к убыткам."
    },
    {
      id: 8,
      question: "Что является основным аргументом при работе с возражением 'Наши сотрудники имеют опыт, но не имеют документов'?",
      options: [
        "Опыт важнее документов",
        "Законодательство требует документального подтверждения квалификации",
        "Документы можно купить",
        "Штрафы за отсутствие документов невелики"
      ],
      correct: 1,
      explanation: "Основной аргумент — законодательство требует документального подтверждения квалификации независимо от опыта."
    },
    {
      id: 9,
      question: "Каков примерный срок получения электронных копий удостоверений после оплаты?",
      options: [
        "1 день",
        "2-3 дня",
        "5-7 дней",
        "10-14 дней"
      ],
      correct: 1,
      explanation: "Электронные копии удостоверений выдаются в течение 2-3 рабочих дней."
    },
    {
      id: 10,
      question: "Какова примерная стоимость оформления одного удостоверения рабочей специальности, согласно модулю?",
      options: [
        "1 500 рублей",
        "3 000 рублей",
        "6 500 рублей",
        "10 000 рублей"
      ],
      correct: 2,
      explanation: "Стоимость оформления одного удостоверения составляет 6 500 рублей."
    }
  ],
  5: [ // Вопросы для модуля 5 (ГОСТы)
    {
      id: 1,
      question: "Что означает аббревиатура ГОСТ?",
      options: [
        "Государственный Образец Стандартизации Товаров",
        "Государственный Стандарт",
        "Главный Отраслевой Стандарт",
        "Городской Отдел Стандартизации"
      ],
      correct: 1,
      explanation: "ГОСТ расшифровывается как Государственный Стандарт."
    },
    {
      id: 2,
      question: "Какой федеральный закон регулирует стандартизацию в Российской Федерации?",
      options: [
        "ФЗ № 44-ФЗ",
        "ФЗ № 162-ФЗ",
        "ФЗ № 273-ФЗ",
        "ФЗ № 315-ФЗ"
      ],
      correct: 1,
      explanation: "Стандартизация регулируется Федеральным законом от 29.06.2015 №162-ФЗ 'О стандартизации в Российской Федерации'."
    },
    {
      id: 3,
      question: "Какой орган является основным ответственным за разработку и утверждение ГОСТов?",
      options: [
        "Минпромторг России",
        "Росстандарт",
        "Роспотребнадзор",
        "Федеральная антимонопольная служба"
      ],
      correct: 1,
      explanation: "Росстандарт (Федеральное агентство по техническому регулированию и метрологии) — основной орган, отвечающий за разработку, утверждение и применение ГОСТов."
    },
    {
      id: 4,
      question: "Является ли использование ГОСТов всегда обязательным?",
      options: [
        "Да, всегда",
        "Нет, только если ссылка на них есть в технических регламентах",
        "Только для государственных компаний",
        "Только для экспорта продукции"
      ],
      correct: 1,
      explanation: "ГОСТы могут быть обязательными, если ссылка на них есть в технических регламентах."
    },
    {
      id: 5,
      question: "Какое преимущество дает наличие сертификата соответствия ГОСТу?",
      options: [
        "Снижение налогов",
        "Повышение доверия потребителей",
        "Увеличение штата сотрудников",
        "Гарантия получения государственных субсидий"
      ],
      correct: 1,
      explanation: "Наличие сертификата соответствия ГОСТу повышает доверие потребителей и партнеров."
    },
    {
      id: 6,
      question: "Каков максимальный штраф для юридических лиц за повторное нарушение требований технических регламентов (включая ссылки на ГОСТы)?",
      options: [
        "100 000 рублей",
        "300 000 рублей",
        "500 000 рублей",
        "1 000 000 рублей с конфискацией"
      ],
      correct: 3,
      explanation: "Максимальный штраф за повторное нарушение составляет от 700 000 до 1 000 000 рублей с конфискацией предметов правонарушения."
    },
    {
      id: 7,
      question: "Чем ГОСТ отличается от ТУ (технических условий)?",
      options: [
        "Ничем, это одно и то же",
        "ГОСТ — государственный стандарт, ТУ — стандарт компании",
        "ТУ всегда обязательны, ГОСТ — нет",
        "ГОСТ регулирует только услуги, ТУ — только продукцию"
      ],
      correct: 1,
      explanation: "ГОСТ — это государственный стандарт, а ТУ — это стандарт, разработанный самой компанией. ГОСТ всегда имеет больший вес."
    },
    {
      id: 8,
      question: "Каков примерный срок оформления сертификата соответствия ГОСТу, согласно модулю?",
      options: [
        "1-2 дня",
        "2-3 дня",
        "От 1 недели до 1 месяца",
        "Более 3 месяцев"
      ],
      correct: 2,
      explanation: "Средний срок оформления сертификата — от 1 недели до 1 месяца, в зависимости от сложности продукции."
    },
    {
      id: 9,
      question: "Что произойдет, если компания продаст продукцию, подпадающую под обязательный ГОСТ, но не соответствующую ему?",
      options: [
        "Получит предупреждение",
        "Может быть оштрафована и продукция изъята",
        "Ничего не произойдет",
        "Будет обязана пройти дополнительное обучение"
      ],
      correct: 1,
      explanation: "За нарушение требований технических регламентов (включая ссылки на ГОСТы) предусмотрены штрафы и изъятие продукции из оборота."
    },
    {
      id: 10,
      question: "Какой из документов не требуется от клиента для сертификации по ГОСТу?",
      options: [
        "Учредительные документы компании",
        "Описание продукции/услуги",
        "Водительское удостоверение директора",
        "Договор аренды производственных помещений"
      ],
      correct: 2,
      explanation: "Водительское удостоверение директора не требуется для сертификации по ГОСТу."
    }
  ]
};

export const contentApi = {
  /**
   * Имитирует получение содержимого модуля по его ID.
   * @param {number} moduleId - ID модуля.
   * @returns {Promise<object>} - Объект с данными модуля.
   */
  fetchModuleContent: async (moduleId) => {
    // Этот метод теперь не будет использоваться для получения полного контента модуля,
    // так как каждый модуль будет иметь свой JSX-файл.
    // Однако, он может быть полезен для получения метаданных, если они будут добавлены в mockModulesContent
    await simulateNetworkDelay();
    const content = mockModulesContent[moduleId]; // Здесь content будет пустым или содержать метаданные
    if (content) {
      return content;
    }
    // Если модуль не найден в mockModulesContent (что ожидаемо для полных модулей),
    // то это не ошибка, а просто означает, что контент в отдельном файле.
    // notify.error('Ошибка', `Контент для модуля ${moduleId} не найден в mockContentApi.`);
    return null; // Возвращаем null, чтобы ModuleLauncher мог понять, что контент в отдельном файле
  },

  /**
   * Имитирует получение вопросов для квиза по ID модуля.
   * @param {number} moduleId - ID модуля.
   * @returns {Promise<Array>} - Массив вопросов для квиза.
   */
  fetchQuizQuestions: async (moduleId) => {
    await simulateNetworkDelay();
    const questions = mockQuizQuestions[moduleId];
    if (questions) {
      return questions;
    }
    notify.error('Ошибка', `Вопросы для квиза модуля ${moduleId} не найдены.`);
    throw new Error(`Вопросы для квиза модуля ${moduleId} не найдены.`);
  }
};
